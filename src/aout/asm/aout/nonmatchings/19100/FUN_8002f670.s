.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches


glabel FUN_8002f670
/* 1FE70 8002F670 C0FFBD27 */  addiu      $sp, $sp, -0x40
/* 1FE74 8002F674 FFFF0234 */  ori        $v0, $zero, 0xffff
/* 1FE78 8002F678 4800A6AF */  sw         $a2, 0x48($sp)
/* 1FE7C 8002F67C 0418C200 */  sllv       $v1, $v0, $a2
/* 1FE80 8002F680 031C0300 */  sra        $v1, $v1, 0x10
/* 1FE84 8002F684 3800BEAF */  sw         $fp, 0x38($sp)
/* 1FE88 8002F688 21F0E000 */  addu       $fp, $a3, $zero
/* 1FE8C 8002F68C 0410C203 */  sllv       $v0, $v0, $fp
/* 1FE90 8002F690 03140200 */  sra        $v0, $v0, 0x10
/* 1FE94 8002F694 1000A3AF */  sw         $v1, 0x10($sp)
/* 1FE98 8002F698 0E80033C */  lui        $v1, %hi(D_800D8DF4)
/* 1FE9C 8002F69C 1400A2AF */  sw         $v0, 0x14($sp)
/* 1FEA0 8002F6A0 F48D628C */  lw         $v0, %lo(D_800D8DF4)($v1)
/* 1FEA4 8002F6A4 3400B7AF */  sw         $s7, 0x34($sp)
/* 1FEA8 8002F6A8 21B86000 */  addu       $s7, $v1, $zero
/* 1FEAC 8002F6AC 3000B6AF */  sw         $s6, 0x30($sp)
/* 1FEB0 8002F6B0 21B0E002 */  addu       $s6, $s7, $zero
/* 1FEB4 8002F6B4 3C00BFAF */  sw         $ra, 0x3c($sp)
/* 1FEB8 8002F6B8 2C00B5AF */  sw         $s5, 0x2c($sp)
/* 1FEBC 8002F6BC 2800B4AF */  sw         $s4, 0x28($sp)
/* 1FEC0 8002F6C0 2400B3AF */  sw         $s3, 0x24($sp)
/* 1FEC4 8002F6C4 2000B2AF */  sw         $s2, 0x20($sp)
/* 1FEC8 8002F6C8 1C00B1AF */  sw         $s1, 0x1c($sp)
/* 1FECC 8002F6CC 1800B0AF */  sw         $s0, 0x18($sp)
/* 1FED0 8002F6D0 4000A4AF */  sw         $a0, 0x40($sp)
/* 1FED4 8002F6D4 4400A5AF */  sw         $a1, 0x44($sp)
/* 1FED8 8002F6D8 1800528C */  lw         $s2, 0x18($v0)
/* 1FEDC 8002F6DC 1C00518C */  lw         $s1, 0x1c($v0)
/* 1FEE0 8002F6E0 0C00478C */  lw         $a3, 0xc($v0)
.L8002F6E4:
/* 1FEE4 8002F6E4 4800A38F */  lw         $v1, 0x48($sp)
/* 1FEE8 8002F6E8 00000000 */  nop
/* 1FEEC 8002F6EC 2B102302 */  sltu       $v0, $s1, $v1
/* 1FEF0 8002F6F0 0F004010 */  beqz       $v0, .L8002F730
/* 1FEF4 8002F6F4 00000000 */   nop
/* 1FEF8 8002F6F8 F48DC48E */  lw         $a0, -0x720c($s6)
.L8002F6FC:
/* 1FEFC 8002F6FC 00000000 */  nop
/* 1FF00 8002F700 0000828C */  lw         $v0, ($a0)
/* 1FF04 8002F704 00000000 */  nop
/* 1FF08 8002F708 00004390 */  lbu        $v1, ($v0)
/* 1FF0C 8002F70C 01004224 */  addiu      $v0, $v0, 1
/* 1FF10 8002F710 000082AC */  sw         $v0, ($a0)
/* 1FF14 8002F714 04182302 */  sllv       $v1, $v1, $s1
/* 1FF18 8002F718 25904302 */  or         $s2, $s2, $v1
/* 1FF1C 8002F71C 4800A38F */  lw         $v1, 0x48($sp)
/* 1FF20 8002F720 08003126 */  addiu      $s1, $s1, 8
/* 1FF24 8002F724 2B102302 */  sltu       $v0, $s1, $v1
/* 1FF28 8002F728 F4FF4014 */  bnez       $v0, .L8002F6FC
/* 1FF2C 8002F72C 00000000 */   nop
.L8002F730:
/* 1FF30 8002F730 1000A48F */  lw         $a0, 0x10($sp)
/* 1FF34 8002F734 4000A38F */  lw         $v1, 0x40($sp)
/* 1FF38 8002F738 24104402 */  and        $v0, $s2, $a0
/* 1FF3C 8002F73C C0100200 */  sll        $v0, $v0, 3
/* 1FF40 8002F740 21306200 */  addu       $a2, $v1, $v0
/* 1FF44 8002F744 0000C590 */  lbu        $a1, ($a2)
/* 1FF48 8002F748 00000000 */  nop
/* 1FF4C 8002F74C 1100A22C */  sltiu      $v0, $a1, 0x11
/* 1FF50 8002F750 23004014 */  bnez       $v0, .L8002F7E0
/* 1FF54 8002F754 00000000 */   nop
/* 1FF58 8002F758 63000A24 */  addiu      $t2, $zero, 0x63
/* 1FF5C 8002F75C FFFF0934 */  ori        $t1, $zero, 0xffff
/* 1FF60 8002F760 0E80083C */  lui        $t0, 0x800e
.L8002F764:
/* 1FF64 8002F764 6600AA10 */  beq        $a1, $t2, .L8002F900
/* 1FF68 8002F768 F0FFA524 */   addiu     $a1, $a1, -0x10
/* 1FF6C 8002F76C 0100C390 */  lbu        $v1, 1($a2)
/* 1FF70 8002F770 00000000 */  nop
/* 1FF74 8002F774 23882302 */  subu       $s1, $s1, $v1
/* 1FF78 8002F778 2B102502 */  sltu       $v0, $s1, $a1
/* 1FF7C 8002F77C 0D004010 */  beqz       $v0, .L8002F7B4
/* 1FF80 8002F780 06907200 */   srlv      $s2, $s2, $v1
/* 1FF84 8002F784 F48D048D */  lw         $a0, -0x720c($t0)
.L8002F788:
/* 1FF88 8002F788 00000000 */  nop
/* 1FF8C 8002F78C 0000828C */  lw         $v0, ($a0)
/* 1FF90 8002F790 00000000 */  nop
/* 1FF94 8002F794 00004390 */  lbu        $v1, ($v0)
/* 1FF98 8002F798 01004224 */  addiu      $v0, $v0, 1
/* 1FF9C 8002F79C 000082AC */  sw         $v0, ($a0)
/* 1FFA0 8002F7A0 04182302 */  sllv       $v1, $v1, $s1
/* 1FFA4 8002F7A4 08003126 */  addiu      $s1, $s1, 8
/* 1FFA8 8002F7A8 2B102502 */  sltu       $v0, $s1, $a1
/* 1FFAC 8002F7AC F6FF4014 */  bnez       $v0, .L8002F788
/* 1FFB0 8002F7B0 25904302 */   or        $s2, $s2, $v1
.L8002F7B4:
/* 1FFB4 8002F7B4 0410A900 */  sllv       $v0, $t1, $a1
/* 1FFB8 8002F7B8 03140200 */  sra        $v0, $v0, 0x10
/* 1FFBC 8002F7BC 24104202 */  and        $v0, $s2, $v0
/* 1FFC0 8002F7C0 0400C38C */  lw         $v1, 4($a2)
/* 1FFC4 8002F7C4 C0100200 */  sll        $v0, $v0, 3
/* 1FFC8 8002F7C8 21306200 */  addu       $a2, $v1, $v0
/* 1FFCC 8002F7CC 0000C590 */  lbu        $a1, ($a2)
/* 1FFD0 8002F7D0 00000000 */  nop
/* 1FFD4 8002F7D4 1100A22C */  sltiu      $v0, $a1, 0x11
/* 1FFD8 8002F7D8 E2FF4010 */  beqz       $v0, .L8002F764
/* 1FFDC 8002F7DC 00000000 */   nop
.L8002F7E0:
/* 1FFE0 8002F7E0 0100C390 */  lbu        $v1, 1($a2)
/* 1FFE4 8002F7E4 10000224 */  addiu      $v0, $zero, 0x10
/* 1FFE8 8002F7E8 06907200 */  srlv       $s2, $s2, $v1
/* 1FFEC 8002F7EC 0E00A214 */  bne        $a1, $v0, .L8002F828
/* 1FFF0 8002F7F0 23882302 */   subu      $s1, $s1, $v1
/* 1FFF4 8002F7F4 1580023C */  lui        $v0, %hi(D_8014DF48)
/* 1FFF8 8002F7F8 48DF4224 */  addiu      $v0, $v0, %lo(D_8014DF48)
/* 1FFFC 8002F7FC 2110E200 */  addu       $v0, $a3, $v0
/* 20000 8002F800 0100E724 */  addiu      $a3, $a3, 1
/* 20004 8002F804 0400C490 */  lbu        $a0, 4($a2)
/* 20008 8002F808 00800334 */  ori        $v1, $zero, 0x8000
/* 2000C 8002F80C B5FFE314 */  bne        $a3, $v1, .L8002F6E4
/* 20010 8002F810 000044A0 */   sb        $a0, ($v0)
/* 20014 8002F814 F48DE28E */  lw         $v0, -0x720c($s7)
/* 20018 8002F818 2FC1000C */  jal        FUN_800304bc
/* 2001C 8002F81C 0C0047AC */   sw        $a3, 0xc($v0)
/* 20020 8002F820 B9BD0008 */  j          .L8002F6E4
/* 20024 8002F824 21380000 */   addu      $a3, $zero, $zero
.L8002F828:
/* 20028 8002F828 0F000224 */  addiu      $v0, $zero, 0xf
/* 2002C 8002F82C 8E00A210 */  beq        $a1, $v0, .L8002FA68
/* 20030 8002F830 2B102502 */   sltu      $v0, $s1, $a1
/* 20034 8002F834 0E004010 */  beqz       $v0, .L8002F870
/* 20038 8002F838 FFFF0234 */   ori       $v0, $zero, 0xffff
/* 2003C 8002F83C F48DC48E */  lw         $a0, -0x720c($s6)
.L8002F840:
/* 20040 8002F840 00000000 */  nop
/* 20044 8002F844 0000828C */  lw         $v0, ($a0)
/* 20048 8002F848 00000000 */  nop
/* 2004C 8002F84C 00004390 */  lbu        $v1, ($v0)
/* 20050 8002F850 01004224 */  addiu      $v0, $v0, 1
/* 20054 8002F854 000082AC */  sw         $v0, ($a0)
/* 20058 8002F858 04182302 */  sllv       $v1, $v1, $s1
/* 2005C 8002F85C 08003126 */  addiu      $s1, $s1, 8
/* 20060 8002F860 2B102502 */  sltu       $v0, $s1, $a1
/* 20064 8002F864 F6FF4014 */  bnez       $v0, .L8002F840
/* 20068 8002F868 25904302 */   or        $s2, $s2, $v1
/* 2006C 8002F86C FFFF0234 */  ori        $v0, $zero, 0xffff
.L8002F870:
/* 20070 8002F870 0410A200 */  sllv       $v0, $v0, $a1
/* 20074 8002F874 03140200 */  sra        $v0, $v0, 0x10
/* 20078 8002F878 24104202 */  and        $v0, $s2, $v0
/* 2007C 8002F87C 0690B200 */  srlv       $s2, $s2, $a1
/* 20080 8002F880 0400C494 */  lhu        $a0, 4($a2)
/* 20084 8002F884 23882502 */  subu       $s1, $s1, $a1
/* 20088 8002F888 2B183E02 */  sltu       $v1, $s1, $fp
/* 2008C 8002F88C 0D006010 */  beqz       $v1, .L8002F8C4
/* 20090 8002F890 21988200 */   addu      $s3, $a0, $v0
/* 20094 8002F894 F48DC48E */  lw         $a0, -0x720c($s6)
.L8002F898:
/* 20098 8002F898 00000000 */  nop
/* 2009C 8002F89C 0000828C */  lw         $v0, ($a0)
/* 200A0 8002F8A0 00000000 */  nop
/* 200A4 8002F8A4 00004390 */  lbu        $v1, ($v0)
/* 200A8 8002F8A8 01004224 */  addiu      $v0, $v0, 1
/* 200AC 8002F8AC 000082AC */  sw         $v0, ($a0)
/* 200B0 8002F8B0 04182302 */  sllv       $v1, $v1, $s1
/* 200B4 8002F8B4 08003126 */  addiu      $s1, $s1, 8
/* 200B8 8002F8B8 2B103E02 */  sltu       $v0, $s1, $fp
/* 200BC 8002F8BC F6FF4014 */  bnez       $v0, .L8002F898
/* 200C0 8002F8C0 25904302 */   or        $s2, $s2, $v1
.L8002F8C4:
/* 200C4 8002F8C4 1400A48F */  lw         $a0, 0x14($sp)
/* 200C8 8002F8C8 4400A38F */  lw         $v1, 0x44($sp)
/* 200CC 8002F8CC 24104402 */  and        $v0, $s2, $a0
/* 200D0 8002F8D0 C0100200 */  sll        $v0, $v0, 3
/* 200D4 8002F8D4 21306200 */  addu       $a2, $v1, $v0
/* 200D8 8002F8D8 0000C590 */  lbu        $a1, ($a2)
/* 200DC 8002F8DC 00000000 */  nop
/* 200E0 8002F8E0 1100A22C */  sltiu      $v0, $a1, 0x11
/* 200E4 8002F8E4 25004014 */  bnez       $v0, .L8002F97C
/* 200E8 8002F8E8 00000000 */   nop
/* 200EC 8002F8EC 63000A24 */  addiu      $t2, $zero, 0x63
/* 200F0 8002F8F0 FFFF0934 */  ori        $t1, $zero, 0xffff
/* 200F4 8002F8F4 0E80083C */  lui        $t0, 0x800e
.L8002F8F8:
/* 200F8 8002F8F8 0300AA14 */  bne        $a1, $t2, .L8002F908
/* 200FC 8002F8FC F0FFA524 */   addiu     $a1, $a1, -0x10
.L8002F900:
/* 20100 8002F900 9FBE0008 */  j          .L8002FA7C
/* 20104 8002F904 01000224 */   addiu     $v0, $zero, 1
.L8002F908:
/* 20108 8002F908 0100C390 */  lbu        $v1, 1($a2)
/* 2010C 8002F90C 00000000 */  nop
/* 20110 8002F910 23882302 */  subu       $s1, $s1, $v1
/* 20114 8002F914 2B102502 */  sltu       $v0, $s1, $a1
/* 20118 8002F918 0D004010 */  beqz       $v0, .L8002F950
/* 2011C 8002F91C 06907200 */   srlv      $s2, $s2, $v1
/* 20120 8002F920 F48D048D */  lw         $a0, -0x720c($t0)
.L8002F924:
/* 20124 8002F924 00000000 */  nop
/* 20128 8002F928 0000828C */  lw         $v0, ($a0)
/* 2012C 8002F92C 00000000 */  nop
/* 20130 8002F930 00004390 */  lbu        $v1, ($v0)
/* 20134 8002F934 01004224 */  addiu      $v0, $v0, 1
/* 20138 8002F938 000082AC */  sw         $v0, ($a0)
/* 2013C 8002F93C 04182302 */  sllv       $v1, $v1, $s1
/* 20140 8002F940 08003126 */  addiu      $s1, $s1, 8
/* 20144 8002F944 2B102502 */  sltu       $v0, $s1, $a1
/* 20148 8002F948 F6FF4014 */  bnez       $v0, .L8002F924
/* 2014C 8002F94C 25904302 */   or        $s2, $s2, $v1
.L8002F950:
/* 20150 8002F950 0410A900 */  sllv       $v0, $t1, $a1
/* 20154 8002F954 03140200 */  sra        $v0, $v0, 0x10
/* 20158 8002F958 24104202 */  and        $v0, $s2, $v0
/* 2015C 8002F95C 0400C38C */  lw         $v1, 4($a2)
/* 20160 8002F960 C0100200 */  sll        $v0, $v0, 3
/* 20164 8002F964 21306200 */  addu       $a2, $v1, $v0
/* 20168 8002F968 0000C590 */  lbu        $a1, ($a2)
/* 2016C 8002F96C 00000000 */  nop
/* 20170 8002F970 1100A22C */  sltiu      $v0, $a1, 0x11
/* 20174 8002F974 E0FF4010 */  beqz       $v0, .L8002F8F8
/* 20178 8002F978 00000000 */   nop
.L8002F97C:
/* 2017C 8002F97C 0100C390 */  lbu        $v1, 1($a2)
/* 20180 8002F980 00000000 */  nop
/* 20184 8002F984 23882302 */  subu       $s1, $s1, $v1
/* 20188 8002F988 2B102502 */  sltu       $v0, $s1, $a1
/* 2018C 8002F98C 0D004010 */  beqz       $v0, .L8002F9C4
/* 20190 8002F990 06907200 */   srlv      $s2, $s2, $v1
/* 20194 8002F994 F48DC48E */  lw         $a0, -0x720c($s6)
.L8002F998:
/* 20198 8002F998 00000000 */  nop
/* 2019C 8002F99C 0000828C */  lw         $v0, ($a0)
/* 201A0 8002F9A0 00000000 */  nop
/* 201A4 8002F9A4 00004390 */  lbu        $v1, ($v0)
/* 201A8 8002F9A8 01004224 */  addiu      $v0, $v0, 1
/* 201AC 8002F9AC 000082AC */  sw         $v0, ($a0)
/* 201B0 8002F9B0 04182302 */  sllv       $v1, $v1, $s1
/* 201B4 8002F9B4 08003126 */  addiu      $s1, $s1, 8
/* 201B8 8002F9B8 2B102502 */  sltu       $v0, $s1, $a1
/* 201BC 8002F9BC F6FF4014 */  bnez       $v0, .L8002F998
/* 201C0 8002F9C0 25904302 */   or        $s2, $s2, $v1
.L8002F9C4:
/* 201C4 8002F9C4 FFFF0334 */  ori        $v1, $zero, 0xffff
/* 201C8 8002F9C8 0418A300 */  sllv       $v1, $v1, $a1
/* 201CC 8002F9CC 031C0300 */  sra        $v1, $v1, 0x10
/* 201D0 8002F9D0 24184302 */  and        $v1, $s2, $v1
/* 201D4 8002F9D4 0690B200 */  srlv       $s2, $s2, $a1
/* 201D8 8002F9D8 23882502 */  subu       $s1, $s1, $a1
/* 201DC 8002F9DC 00801434 */  ori        $s4, $zero, 0x8000
/* 201E0 8002F9E0 0400C294 */  lhu        $v0, 4($a2)
/* 201E4 8002F9E4 1580153C */  lui        $s5, 0x8015
/* 201E8 8002F9E8 2310E200 */  subu       $v0, $a3, $v0
/* 201EC 8002F9EC 23804300 */  subu       $s0, $v0, $v1
/* 201F0 8002F9F0 FF7F1032 */  andi       $s0, $s0, 0x7fff
.L8002F9F4:
/* 201F4 8002F9F4 2B10F000 */  sltu       $v0, $a3, $s0
/* 201F8 8002F9F8 02004010 */  beqz       $v0, .L8002FA04
/* 201FC 8002F9FC 23288702 */   subu      $a1, $s4, $a3
/* 20200 8002FA00 23289002 */  subu       $a1, $s4, $s0
.L8002FA04:
/* 20204 8002FA04 2B106502 */  sltu       $v0, $s3, $a1
/* 20208 8002FA08 02004010 */  beqz       $v0, .L8002FA14
/* 2020C 8002FA0C 2118A000 */   addu      $v1, $a1, $zero
/* 20210 8002FA10 21186002 */  addu       $v1, $s3, $zero
.L8002FA14:
/* 20214 8002FA14 21286000 */  addu       $a1, $v1, $zero
/* 20218 8002FA18 23986502 */  subu       $s3, $s3, $a1
/* 2021C 8002FA1C 48DFA626 */  addiu      $a2, $s5, -0x20b8
.L8002FA20:
/* 20220 8002FA20 21100602 */  addu       $v0, $s0, $a2
/* 20224 8002FA24 01001026 */  addiu      $s0, $s0, 1
/* 20228 8002FA28 2120E600 */  addu       $a0, $a3, $a2
/* 2022C 8002FA2C 0100E724 */  addiu      $a3, $a3, 1
/* 20230 8002FA30 00004390 */  lbu        $v1, ($v0)
/* 20234 8002FA34 FFFFA524 */  addiu      $a1, $a1, -1
/* 20238 8002FA38 F9FFA014 */  bnez       $a1, .L8002FA20
/* 2023C 8002FA3C 000083A0 */   sb        $v1, ($a0)
/* 20240 8002FA40 0500F414 */  bne        $a3, $s4, .L8002FA58
/* 20244 8002FA44 00000000 */   nop
/* 20248 8002FA48 F48DE28E */  lw         $v0, -0x720c($s7)
/* 2024C 8002FA4C 2FC1000C */  jal        FUN_800304bc
/* 20250 8002FA50 0C0047AC */   sw        $a3, 0xc($v0)
/* 20254 8002FA54 21380000 */  addu       $a3, $zero, $zero
.L8002FA58:
/* 20258 8002FA58 E6FF6016 */  bnez       $s3, .L8002F9F4
/* 2025C 8002FA5C FF7F1032 */   andi      $s0, $s0, 0x7fff
/* 20260 8002FA60 B9BD0008 */  j          .L8002F6E4
/* 20264 8002FA64 00000000 */   nop
.L8002FA68:
/* 20268 8002FA68 F48DE38E */  lw         $v1, -0x720c($s7)
/* 2026C 8002FA6C 21100000 */  addu       $v0, $zero, $zero
/* 20270 8002FA70 0C0067AC */  sw         $a3, 0xc($v1)
/* 20274 8002FA74 180072AC */  sw         $s2, 0x18($v1)
/* 20278 8002FA78 1C0071AC */  sw         $s1, 0x1c($v1)
.L8002FA7C:
/* 2027C 8002FA7C 3C00BF8F */  lw         $ra, 0x3c($sp)
/* 20280 8002FA80 3800BE8F */  lw         $fp, 0x38($sp)
/* 20284 8002FA84 3400B78F */  lw         $s7, 0x34($sp)
/* 20288 8002FA88 3000B68F */  lw         $s6, 0x30($sp)
/* 2028C 8002FA8C 2C00B58F */  lw         $s5, 0x2c($sp)
/* 20290 8002FA90 2800B48F */  lw         $s4, 0x28($sp)
/* 20294 8002FA94 2400B38F */  lw         $s3, 0x24($sp)
/* 20298 8002FA98 2000B28F */  lw         $s2, 0x20($sp)
/* 2029C 8002FA9C 1C00B18F */  lw         $s1, 0x1c($sp)
/* 202A0 8002FAA0 1800B08F */  lw         $s0, 0x18($sp)
/* 202A4 8002FAA4 0800E003 */  jr         $ra
/* 202A8 8002FAA8 4000BD27 */   addiu     $sp, $sp, 0x40
